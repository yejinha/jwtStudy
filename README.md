# jwtStudy
-  jjwt 라이브러리를 사용해 JWT 생성, 검증 메소드 유틸
-  request, response 객체에 토큰 전달, 확인하는 컨트롤러

---


### JWT (Json Web Token) 
- Json 객체를 통해서 관리되는 토큰 방식. 헤더, 페이로드, 서명으로 구성되어 있다.
- http header 에 담아서 서로 통신.
- 클라이언트에 저장하기에  서버에서 클라이언트의 토큰 조작할 수는 없다.  
                
 *헤더* : 토큰의 타입과  해싱 알고리즘 정보 들어있다. 나중에  토큰 검증할때 서명 부분에 사용된다. 

*페이로드* : 토큰에 담을 정보를 말하며, 이 때 정보 하나씩을 클레임 이라고 한다.  
  - 공개 클레임: 충돌을 방지하기 위한 정보로 URI 형식으로 지음
- 등록된 클레임:  토큰에 대한 정보를 담기 위해 이미 정해진 정보들.     
	Ex) 토큰 발급자,  만료 시간 등 . 고정 정보
	- 공개 클레임: 충돌을 방지하기 위한 정보로 URI 형식으로 지음
	- 비공개 클레임:  클라이언트- 서버 간 협의를 위해 만든 클레임.  (유저 이름 이런거) 

*서명* : 헤더의 인코딩 값과 페이로드의 인코딩 값을 다시 해시해서 만든다. 

이렇게 만든 데이터를 .  으로 조합해 다시 base64 인코딩 시켜서 보낸다. 

### JJWT :  
   자바에서 JWT 토큰 구현하는 라이브러리 중 하나 (https://github.com/jwtk/jjwt#jws).   
   JWT 처리를 위한 builder, parser  제공한다. Dependency 추가해서 사용 시작함. 

- 헤더: 토큰의 타입, 해시 알고리즘 방식 세팅할 수 있고,   
                세팅 안하면 토큰 타입은 JWT,  해시 알고리즘은 sha256으로 세팅된다. (위의 예시)     

-  페이로드 : 기본 정보인 발급자,  발급시간, 만료시간 등은 set  함수로 개별 구현되어있다.  
                        커스텀  내용들은 map<String, String >  으로 만든 후 setClaims ()로  넣는다. 
-  서명 : signWith() 메소드에 각자 secret key 로 사용할 키를 넣는다.    
                  기본 알고리즘은 sha256 이며 , .signWith(key,SignatureAlgorithm.HS512)  같이 알고리즘 변경 가능하다.   
